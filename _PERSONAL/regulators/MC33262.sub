.SUBCKT MC33262 1 2 3 4 5 0 7 8
*SPICE MODEL DESIGNER : KEHINDE OMOLAYO 11-25-01
*POWER FACTOR CONTROLLER
*TERMINAL IDENTIFICATIONS ARE
*VOLTAGE FEDBACK INPUT=1 COMPENSATION=2
*MULTIPLIER INPUT=3 CURRENT SENSE INPUT=4
*ZERO CURRENT DETECT INPUT=5 GND=0 DRIVE OUTPUT=7 VCC=8

* Model translation to LTspice by Vahe Caliskan, 8/9/2007
* All commented out material denoted by ** vahe **
* The translation to commented out material is given in
* the line following the commented version
* This is shown for comparison purposes only
* All standard disclaimers apply.

.MODEL UVL_INPUT SW (VT=10.5 VH=2.5 RON=1 ROFF=1MEG
.MODEL IDET_INPUT SW (VT=1.5 VH=0.1 RON=1 ROFF=1MEG
.MODEL D33262A D  CJO=2P
.MODEL D33262 D  CJO=2P N=0.5
.MODEL Q33262 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=0.5N TR=10N)
S1 9 11 8 0 UVL_INPUT
V1 9 0 2.5
R1 11 0 100K
E1 10 0 12 13 1
Q1 8 14 12 Q33262
Q2 15 16 0 Q33262
V3 10 17
R2 13 14 200
R3 17 16 1
B1 12 13 I=0.55M*V(18)*V(8)+I(V3)
R4 12 7 10
R5 15 7 10
C1 12 0 50P
V4 19 0 16
D1 14 19 D33262A

** vahe **B2 18 0 V=V(50)<1 ? V(11)>1 ? 2 : -2
B2 18 0 V=IF(V(50)<1, IF(V(11)>1, 2, -2), -2) ;

B3 2 0 I=20U/(1+EXP(V(26)))
X1 21 22 LIM33262#0 
*{K=1 PLIM=100 NLIM=100 }
E2 21 0 9 1 20
V5 24 0 6.4
D2 2 24 D33262
I1 0 2 10U
D3 25 20 D33262
D4 25 2 D33262
C2 26 0 100P
R6 0 26 2.901K
L1 22 26 3.161M
X2 23 30 LIM33262#1 
*{K=10 PLIM=16 NLIM=16 }
V7 3 23 1.6
B4 32 0 V=V(30)/10+1.6
X3 27 31 LIM33262#2 
*{K=10 PLIM=8.75 NLIM=8.75 }
V8 2 27 2.875
B5 28 0 V=V(31)/10+2.875
B6 29 0 V=544M*(V(28)-1.98)*V(32)+41.7M*(V(28)-1.98)
X4 29 38 LIM33262#3 
*{K=1 PLIM=1.55 NLIM=1.55 }
C3 34 0 10P IC=0
R9 4 34 20K

** vahe **B7 36 0 V=V(34)>V(33) ? 0 : 2
B7 36 0 V=IF(V(34)>V(33), 0, 2) ;

R10 37 45 40K
C4 45 0 10P
VOFFSET 33 38 9M

** vahe **B8 35 0 V=V(45)>2.7 ? 0 : 2
B8 35 0 V=IF(V(45)>2.7, 0, 2) ;

V9 39 46 32.5
D5 8 39 D33262A
V10 40 0 1.2
D6 5 43 D33262A
V11 43 0 6
S2 0 42 49 0 IDET_INPUT
R13 42 9 100K
E3 37 0 1 0 1
E4 57 0 5 0 1
R14 57 49 32K
C5 49 0 10P IC=0
X5 47 48 50 51 RS33262#0  
*{TD=1N }

** vahe **B9 47 0 V=V(44)>1 ? V(59)>1 ? 2 : 0
B9 47 0 V=IF(V(44)>1, IF(V(59)>1, 2, 0), 0) ;

** vahe **B10 48 0 V=V(47)>1 ? V(54)>1 ? 0 : V(52)>1.667 ? 0 : 2
B10 48 0 V=IF(V(47)>1, IF(V(54)>1, 0, IF(V(52)>1.667, 0, 2)), 2) ;missed 2nd right-paren after 2;

D7 52 9 D33262A

** vahe **B11 52 0 I=V(44)>1 ? V(42)>1 ? V(50)>1 ? V(11)>1 ?  -10U : 2M
B11 52 0 I=IF(V(44)>1, IF(V(42)>1, IF(V(50)>1, IF(V(11)>1, -10U, 2M), 2M), 2M), 2M)

D8 0 52 D33262A
C6 52 0 2.8N IC=-0.673
V13 53 0 PULSE 0 2

** vahe **B13 8 0 I=V(11)<1 ? V(8)/28K : 81.6U*V(8)+7.847M
B13 8 0 I=IF(V(11)<1, V(8)/28K, 81.6U*V(8)+7.847M)

R17 46 0 454
D9 40 5 D33262A
X6 44 54 60 59 RS33262#0  
*{TD=1N }

** vahe **B14 44 0 V=V(53)>1 ? V(35)>1 ? V(36)>1 ? 2 : 0
B14 44 0 V=IF(V(53)>1, IF(V(35)>1, IF(V(36)>1, 2, 0), 0), 0)

** vahe **B16 54 0 V=V(44)<1 ? 2 : V(52)>1.667 ? 0 : V(42)
B16 54 0 V=IF(V(44)<1, 2, IF(V(52)>1.667, 0, V(42)) )

V14 20 0 1.7
I4 0 25 680U
.ENDS

.SUBCKT LIM33262#0 1 2
RIN 1 0 1E12
E1 3 0 0 1 1.0000 
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
VN 5 2 99.940 
DN 4 5 DN
VP 2 6 99.940 
DP 6 4 DN
.MODEL UVL_INPUT SW (VT=10.5 VH=2.5 RON=1 ROFF=1MEG
.MODEL IDET_INPUT SW (VT=1.5 VH=0.1 RON=1 ROFF=1MEG
.MODEL D33262A D  CJO=2P
.MODEL D33262 D  CJO=2P N=0.5
.MODEL Q33262 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=0.5N TR=10N)
.MODEL DN D(IS=1E-12 N=.14319)
.ENDS

.SUBCKT LIM33262#1 1 2
RIN 1 0 1E12
E1 3 0 0 1 10.0000 
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
VN 5 2 15.940 
DN 4 5 DN
VP 2 6 15.940 
DP 6 4 DN
.MODEL UVL_INPUT SW (VT=10.5 VH=2.5 RON=1 ROFF=1MEG
.MODEL IDET_INPUT SW (VT=1.5 VH=0.1 RON=1 ROFF=1MEG
.MODEL D33262A D  CJO=2P
.MODEL D33262 D  CJO=2P N=0.5
.MODEL Q33262 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=0.5N TR=10N)
.MODEL DN D(IS=1E-12 N=.14319)
.ENDS

.SUBCKT LIM33262#2 1 2
RIN 1 0 1E12
E1 3 0 0 1 10.0000 
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
VN 5 2 8.6903 
DN 4 5 DN
VP 2 6 8.6903 
DP 6 4 DN
.MODEL UVL_INPUT SW (VT=10.5 VH=2.5 RON=1 ROFF=1MEG
.MODEL IDET_INPUT SW (VT=1.5 VH=0.1 RON=1 ROFF=1MEG
.MODEL D33262A D  CJO=2P
.MODEL D33262 D  CJO=2P N=0.5
.MODEL Q33262 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=0.5N TR=10N)
.MODEL DN D(IS=1E-12 N=.14319)
.ENDS

.SUBCKT LIM33262#3 1 2
RIN 1 0 1E12
E1 3 0 0 1 1.0000 
RC1 2 4 1MEG
C1 2 4 1F IC=0
R1 3 4 1MEG
E2 2 0 0 4 1E6
VN 5 2 1.4903 
DN 4 5 DN
VP 2 6 1.4903 
DP 6 4 DN
.MODEL UVL_INPUT SW (VT=10.5 VH=2.5 RON=1 ROFF=1MEG
.MODEL IDET_INPUT SW (VT=1.5 VH=0.1 RON=1 ROFF=1MEG
.MODEL D33262A D  CJO=2P
.MODEL D33262 D  CJO=2P N=0.5
.MODEL Q33262 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=0.5N TR=10N)
.MODEL DN D(IS=1E-12 N=.14319)
.ENDS

.SUBCKT RS33262#0 2 3 4 5
C1 11 0 10P
R3 10 8 144.27 
C3 8 0 10P

** vahe **B1 10 0 V=V(2)>1 ? V(5)>1 ? 0 : 2
B1 10 0 V=IF(V(2)>1, IF(V(5)>1, 0, 2), 2)

** vahe **B2 16 0 V=V(3)>1 ? V(4)>1 ? 0 : 2
B2 16 0 V=IF(V(3)>1, IF(V(4)>1, 0, 2), 2)

** vahe **B5 4 0 V=V(8)>1 ? 2 : 0
B5 4 0 V=IF(V(8)>1, 2, 0)

** vahe **B6 5 0 V=V(11)>1 ? 2 : 0
B6 5 0 V=IF(V(11)>1, 2, 0)

R1 16 11 144.27 
.MODEL UVL_INPUT SW (VT=10.5 VH=2.5 RON=1 ROFF=1MEG
.MODEL IDET_INPUT SW (VT=1.5 VH=0.1 RON=1 ROFF=1MEG
.MODEL D33262A D  CJO=2P
.MODEL D33262 D  CJO=2P N=0.5
.MODEL Q33262 NPN (IS=15.2F NF=1 BF=105 VAF=98.5 IKF=.5
+ ISE=8.2P NE=2 BR=4 NR=1 VAR=20 IKR=.225 RE=.373 RB=1.49
+ RC=.149 XTB=1.5 CJE=35.5P CJC=12.2P TF=0.5N TR=10N)
.ENDS
